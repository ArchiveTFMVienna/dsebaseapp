<?xml version="1.0" encoding="UTF-8"?>
<div data-template="templates:surround" data-template-with="templates/datatable.html" data-template-at="datatable">
    <div class="panel panel-default">
        <div class="panel-heading" style="text-align:center;">
            <h1>Places</h1>
        </div>
        <div class="panel-body">
            <table id="myTable" class="table table-striped table-condensed table-hover">
                <thead>
                    <tr>
                        <th class="header">
                            Ortsname (normalisiert)
                        </th>
                        <th>Alternative Schreibweisen</th>
                        <th>Normdata</th>
                        <th>Lat</th>
                        <th>Lng</th>
                    </tr>
                </thead>
                <tr data-template="app:listPlace"/>
            </table>
        </div>
    </div>
    <script>
        
        let draw = false;

        init();
        function init() {
            // initialize DataTables
            const table = $("#myTable").DataTable();
            // get table data
            const tableData = getTableData(table);
            // create Highcharts
            //createHighcharts(tableData);

            // table events
            setTableEvents(table);
        }

        function getTableData(table) {
            var filteredData = table
                .data()
                .filter( function ( value, index ) {
                    if (value[4]){
                        return value
                    }
                } );
            // console.log(filteredData);
            return filteredData
        }

        function setTableEvents(table) {
            // listen for page clicks
            table.on("page", () =&gt; {
                draw = true;
            });

            // listen for updates and adjust the chart accordingly
            table.on("draw", () =&gt; {
                if (draw) {
                    draw = false;
                } else {
                const tableData = getTableData(table);
                //createHighcharts(tableData);
                console.log(tableData);
                }
            });

        }
        
    </script>
    <!--<script>
        $('#myTable').DataTable({
            keepConditions: true
        });
    </script>-->
</div>